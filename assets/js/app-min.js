const grid=document.querySelector("#grid .grid"),clueGrid=document.querySelector("#clue-grid"),generateBtn=document.querySelector("#generate"),sizeObj={"5x5":25,"6x5":30};grid.addEventListener("click",(function(e){e.target.classList.toggle("fill")})),generateBtn.addEventListener("click",(function(e){clearPuzzle(),buildPuzzle("6x5"),e.preventDefault()}));const generateGrid=function(e){grid.classList="grid grid--"+e,grid.innerHTML="";for(var t=0;t<sizeObj[e];t++)grid.innerHTML+="<div></div>"};generateGrid("6x5");const buildPuzzle=function(e){const t=Array.from(document.querySelectorAll("#grid .grid div"));let l=e.split("x"),n=l.shift(),r=l.shift(),i=n,c=[];for(let e=0;e<r;e++)c[e]=[];let s=[];for(let e=0;e<n;e++)s[e]=[];for(let e=0;e<t.length;e++){let l=Math.floor(e/i);c[l][e-l*i]=t[e].classList.contains("fill"),s[e-l*i][l]=t[e].classList.contains("fill")}buildClues(c,s);const d=document.createElement("div");d.classList.add("clue"),d.classList.add("clue--"+e),d.innerHTML="";var u=grid.cloneNode(!0);u.removeAttribute("id");document.querySelector("#clue-grid section"),document.createElement("div");d.appendChild(u),clueGrid.appendChild(d)},clearPuzzle=function(){clueGrid.innerHTML=""},buildClues=function(e,t){let l="";for(let t=0;t<e.length;t++)l+=`<span class="row row--${t+1}">`+calculateClues(e,t)+"</span>";for(let e=0;e<t.length;e++)l+=`<span class="col col--${e+1}">`+calculateClues(t,e)+"</span>";return l},calculateClues=function(e,t){let l="",n=0,r=[];for(let t=0;t<e.length;t++)r[t]=[];for(let i=0;i<e[t].length;i++)e[t][i]?n++:n>0&&(r[t].push(n),l+=`<span>${n}</span>`,n=0),i===e[t].length-1&&n>0&&(r[t].push(n),l+=`<span>${n}</span>`,n=0);return 0===r[t].length&&(l+=`<span>${n}</span>`),l};